// ====================================================================================
// |  기준                       | 설명                                                 |
// |--------------------------- |------------------------------------------------------|
// | 만료 기간이 지난 경우          | 토큰의 expires_at 시간이 지난 경우 삭제 대상             |
// | revoked + 일정 기간 경과      | revoked:true 상태가 되고 일정 기간(예: 30일) 경과 시 정리 |
// | 정기적인 정리 작업(cron)      | 주기적으로 실행되는 스케줄 작업에서 삭제 수행               |
// | 사용자 탈퇴 시 일괄 삭제       | 계정 삭제 시 해당 유저의 세션도 같이 정리됨                |
// ====================================================================================

// ====================================================================================
// |        이유                  | 설명                                                |
// |-----------------------------|-----------------------------------------------------|
// | 보안 원칙상 단방향 처리         | revoke는 "더는 신뢰할 수 없다"는 선언. 되돌리면 위험      |
// | 데이터 무결성 유지             | 한번 무효화된 세션은 재사용되지 않는다는 확실한 기준 유지    |
// | 행위의 명확성                 | 로그아웃, 해킹 의심 등 명시적 무효화 후에는 복원하지 않음    |
// | 재사용 방지                   | 토큰 복사본이 유출돼도, revoked 처리되어 있으면 무력화 가능 |
// ====================================================================================
// revoked: true는 "이 세션은 더는 신뢰하지 않는다"는 시스템의 선언이기 때문에, 보안적으로는 절대 되돌리지 않고, 대체(replace) 방식으로 새롭게 시작하는 것이 원칙.

// 사용자별 refreshToken 세션 정보
export interface RefreshSession {
  // 고유 식별자 (UUID)
  id: string;

  // 연결된 사용자 ID (users 테이블 참조)
  userId: string;

  // 저장된 refreshToken (가능하면 해시된 값)
  refreshToken: string;

  // 로그인에 사용된 기기 정보 (예: Chrome on macOS)
  deviceInfo?: string;

  // 로그인 당시 IP 주소
  ipAddress?: string;

  // 토큰 발급 시점
  issuedAt: string; // ISO string

  // 토큰 만료 시각
  expiresAt: string; // ISO string

  // 로그아웃 또는 강제 만료 여부
  revoked: boolean;

  // 세션 생성 시각 (기록용)
  createdAt: string;

  // 마지막 업데이트 시각
  updatedAt: string;
}